/**
 * pong_render.hpp — Skeleton class declarations
 * Rockstar Presents Table Tennis (Xbox 360, 2006)
 *
 * 17 classes — auto-generated by gen_headers_v3.py
 * Sources: rtti_vtable_map | vtable_layout_map | offset_cluster_map
 *          | debug_string_field_map | rtti_class_hierarchy
 *
 * TODO: fill return types, params, inheritance.
 *       Cross-ref recomp/structured_pass5_final/ for each method.
 */
#pragma once
#include <stdint.h>

// Forward declarations (full definition below)

/**
 * pongDrawBucket — A single render bucket that holds renderable pointers.
 * Layout verified from pongDrawBucket_AddEntry @ 0x822278D8
 */
struct pongDrawBucket {
    void**      m_pData;       // +0x08  ptr to layer descriptor array
    uint16_t    m_numLayers;   // +0x0C  number of layers in this bucket
    uint16_t    _pad0E;
    uint8_t     _pad10[0x40];  // padding to +0x50
    uint8_t     m_bEnabled;    // +0x50  skip this bucket if 0

    static void InitStatics();   // init per-class static data
    void Load(const char* name, int maxEntries, void* bucketData);
};

// ── pongDrawBucketManager  [vtable @ 0x8204E280] ──────────────────────────
//
// Manages a set of named pongDrawBucket render buckets loaded from an XML
// config file ("$/tune/settings.drawbucket").  Up to 32 buckets are
// supported; up to 32 entries per bucket.  Each bucket slot holds a flat
// array of renderable pointers registered via AddEntry().
//
// Layout verified from pongDrawBucketManager_Load @ 0x82227430 and
// pongDrawBucketManager_vfn_0 @ 0x822272B0:
//
//   +0x00  void**           vtable
//   +0x04  uint32_t         m_field_04          (reserved / read-only)
//   +0x08  pongDrawBucket** m_pBuckets          xe_EC88(numBuckets * 4)
//   +0x0C  uint16_t         m_numBuckets        BucketCount: XML attr (1..32)
//   +0x0E  uint16_t         m_defaultBucket     DefaultBucket: XML attr
//   +0x10  char             m_configBasename[32] e.g. "settings"
//   +0x30  char             m_configExt[32]      "drawbucket"
//          total size >= 0x50
//
// Global mirror: g_numDrawBuckets @ 0x82606358 (SDA) = m_numBuckets
struct pongDrawBucketManager {
    void**           vtable;                // +0x00
    uint32_t         m_field_04;            // +0x04  (purpose unknown — read-only in cluster)
    pongDrawBucket** m_pBuckets;            // +0x08  heap array [m_numBuckets]
    uint16_t         m_numBuckets;          // +0x0C  BucketCount: (valid: 1..32)
    uint16_t         m_defaultBucket;       // +0x0E  DefaultBucket: index
    char             m_configBasename[32];  // +0x10  strncpy'd from .rdata ptr
    char             m_configExt[32];       // +0x30  strncpy'd from .rdata ptr

    virtual ~pongDrawBucketManager();       // [0] @ 0x822272B0 — singleton cleanup + free

    void Load();                            // @ 0x82227430 — parse XML, alloc & fill buckets
    void AddEntry(pongDrawBucket* bucket,
                  void* renderable,
                  uint32_t bucketMask);     // @ 0x822278D8 — register renderable in buckets
};

// ── pongDrawable  [vtable @ 0x8204DD9C] ──────────────────────────
struct pongDrawable {
    void**      vtable;           // +0x00

    // ── virtual methods ──
    virtual ~pongDrawable();                  // [0] @ 0x82222e20
    virtual void vfn_2();  // [2] @ 0x8225bd28
    virtual void vfn_3();  // [3] @ 0x8225bc60
    virtual void vfn_4();  // [4] @ 0x82223210
};

// ── pongGammaControl  [vtable @ 0x820346E4] ──────────────────────────
struct pongGammaControl {
    void**      vtable;           // +0x00
};

// ── pongLightGlowCapsule  [vtable @ 0x8206A69C] ──────────────────────────
struct pongLightGlowCapsule {
    void**      vtable;           // +0x00

    // ── virtual methods ──
    virtual ~pongLightGlowCapsule();                  // [0] @ 0x823795f0
    virtual void PostLoadProperties();  // [20] @ 0x8237ca50
    virtual void Validate();  // [21] @ 0x8237cb68
    virtual void PostLoadChildren();  // [22] @ 0x8237ca98
};

// ── pongLightGlowMgr  [vtable @ 0x8206A768] ──────────────────────────
struct pongLightGlowMgr {
    void**      vtable;           // +0x00

    // ── virtual methods ──
    virtual ~pongLightGlowMgr();                  // [0] @ 0x8237d060
};

// ── pongLightGlowSquare  [vtable @ 0x8206A704] ──────────────────────────
struct pongLightGlowSquare {
    void**      vtable;           // +0x00

    // ── virtual methods ──
    virtual ~pongLightGlowSquare();                  // [0] @ 0x82379650
    virtual void PostLoadProperties();  // [20] @ 0x8237c8a0
    virtual void Validate();  // [21] @ 0x8237c9a8
    virtual void PostLoadChildren();  // [22] @ 0x8237c8e8
};

// ── pongPostEffects  [vtable @ 0x820342F0] ──────────────────────────
struct pongPostEffects {
    void**      vtable;           // +0x00

    // ── virtual methods ──
    virtual ~pongPostEffects();                  // [0] @ 0x8213f4b0
};

// ── pongRenderThread  [vtable @ 0x82059634] ──────────────────────────
struct pongRenderThread {
    void**      vtable;           // +0x00

    // ── virtual methods ──
    virtual ~pongRenderThread();                  // [0] @ 0x822c05d8
};

// ── pongRenderable  [vtable @ 0x82032404] ──────────────────────────
struct pongRenderable {
    void**      vtable;           // +0x00
};

// ── pongScreenCapture  [vtable @ 0x8205B0EC] ──────────────────────────
struct pongScreenCapture {
    void**      vtable;           // +0x00
};

// ── pongScreenCaptureMgr  [vtable @ 0x820591E4] ──────────────────────────
struct pongScreenCaptureMgr {
    void**      vtable;           // +0x00

    // ── virtual methods ──
    virtual ~pongScreenCaptureMgr();                  // [0] @ 0x822bc288
};

// ── pongScrnTransFadeIn  [vtable @ 0x8206A19C] ──────────────────────────
struct pongScrnTransFadeIn {
    void**      vtable;           // +0x00

    // ── virtual methods ──
    virtual void vfn_2();  // [2] @ 0x82378718
    virtual void vfn_3();  // [3] @ 0x82378778
    virtual void vfn_4();  // [4] @ 0x823787d8
    virtual void vfn_5();  // [5] @ 0x82378460
    virtual void vfn_6();  // [6] @ 0x82378900
};

// ── pongScrnTransFreezeAndCrossFade  [vtable @ 0x8206A1C0] ──────────────────────────
struct pongScrnTransFreezeAndCrossFade {
    void**      vtable;           // +0x00

    // ── virtual methods ──
    virtual void vfn_2();  // [2] @ 0x82378938
    virtual void vfn_3();  // [3] @ 0x823789a8
    virtual void vfn_4();  // [4] @ 0x82378a18
    virtual void vfn_5();  // [5] @ 0x82378a78
    virtual void vfn_6();  // [6] @ 0x82378a80
};

// ── pongScrnTransFreezeAndFadeOut  [vtable @ 0x8206A178] ──────────────────────────
struct pongScrnTransFreezeAndFadeOut {
    void**      vtable;           // +0x00

    // ── virtual methods ──
    virtual ~pongScrnTransFreezeAndFadeOut();                  // [0] @ 0x82378450
    virtual void vfn_2();  // [2] @ 0x823784f0
    virtual void vfn_3();  // [3] @ 0x82378578
    virtual void vfn_4();  // [4] @ 0x82378610
    virtual void vfn_5();  // [5] @ 0x823786a8
    virtual void vfn_6();  // [6] @ 0x823786c8
};

// ── pongScrnTransSwipe  [vtable @ 0x8206A1E4] ──────────────────────────
struct pongScrnTransSwipe {
    void**      vtable;           // +0x00

    // ── virtual methods ──
    virtual void vfn_2();  // [2] @ 0x82378ab0
    virtual void vfn_3();  // [3] @ 0x82378bd0
    virtual void vfn_4();  // [4] @ 0x82378c20
    virtual void vfn_5();  // [5] @ 0x82378d98
    virtual void vfn_6();  // [6] @ 0x82378de0
};

// ── pongShadowMap  [vtable @ 0x820346D0] ──────────────────────────
// Confirmed methods: GenerateShadowMaps
struct pongShadowMap {
    void**      vtable;           // +0x00

    // ── field access clusters ──
    uint32_t     field_0x0004;  // +0x0004  R:3 W:3
    uint32_t     field_0x0008;  // +0x0008  R:13 W:2
    uint32_t     field_0x000c;  // +0x000c  R:1 W:4
    uint32_t     field_0x0010;  // +0x0010  R:1 W:0
    uint32_t     field_0x0014;  // +0x0014  R:3 W:1
    uint32_t     field_0x0018;  // +0x0018  R:1 W:0
    uint32_t     field_0x001c;  // +0x001c  R:1 W:1
    uint32_t     field_0x0020;  // +0x0020  R:1 W:0
    uint32_t     field_0x0024;  // +0x0024  R:1 W:0
    uint32_t     field_0x0028;  // +0x0028  R:3 W:0
    uint32_t     field_0x002c;  // +0x002c  R:2 W:0
    uint32_t     field_0x0030;  // +0x0030  R:4 W:1
    uint32_t     field_0x0034;  // +0x0034  R:3 W:1
    uint32_t     field_0x0038;  // +0x0038  R:1 W:0
    uint32_t     field_0x003c;  // +0x003c  R:2 W:0
    uint32_t     field_0x0040;  // +0x0040  R:3 W:0
    uint32_t     field_0x0044;  // +0x0044  R:2 W:0
    uint32_t     field_0x0048;  // +0x0048  R:3 W:0
    uint8_t     _pad0x0080[52];
    uint32_t     field_0x0080;  // +0x0080  R:0 W:1
    uint32_t     field_0x0084;  // +0x0084  R:0 W:1
    uint32_t     field_0x0088;  // +0x0088  R:0 W:1
    uint32_t     field_0x008c;  // +0x008c  R:0 W:1
    uint32_t     field_0x0090;  // +0x0090  R:0 W:1
    uint32_t     field_0x0094;  // +0x0094  R:0 W:1
    uint32_t     field_0x0098;  // +0x0098  R:0 W:1
    uint32_t     field_0x009c;  // +0x009c  R:0 W:1
    uint32_t     field_0x00a0;  // +0x00a0  R:1 W:1
    uint32_t     field_0x00a4;  // +0x00a4  R:0 W:1
    uint32_t     field_0x00a8;  // +0x00a8  R:0 W:1
    uint32_t     field_0x00ac;  // +0x00ac  R:0 W:1
    uint32_t     field_0x00b0;  // +0x00b0  R:0 W:1
    uint32_t     field_0x00b4;  // +0x00b4  R:0 W:1
    uint32_t     field_0x00b8;  // +0x00b8  R:0 W:1
    uint32_t     field_0x00bc;  // +0x00bc  R:0 W:1
    uint32_t     field_0x00c0;  // +0x00c0  R:0 W:1
    uint32_t     field_0x00c4;  // +0x00c4  R:0 W:1
    uint32_t     field_0x00c8;  // +0x00c8  R:0 W:1
    uint32_t     field_0x00cc;  // +0x00cc  R:0 W:1
    uint32_t     field_0x00d0;  // +0x00d0  R:0 W:1
    uint32_t     field_0x00d4;  // +0x00d4  R:1 W:1
    uint32_t     field_0x00d8;  // +0x00d8  R:0 W:1
    uint32_t     field_0x00dc;  // +0x00dc  R:1 W:1
    uint32_t     field_0x00e0;  // +0x00e0  R:1 W:1
    uint32_t     field_0x00e4;  // +0x00e4  R:1 W:1
    uint32_t     field_0x00e8;  // +0x00e8  R:3 W:1
    uint32_t     field_0x00ec;  // +0x00ec  R:0 W:1
    uint32_t     field_0x00f0;  // +0x00f0  R:0 W:1
    uint32_t     field_0x00f4;  // +0x00f4  R:0 W:1
    uint32_t     field_0x00f8;  // +0x00f8  R:0 W:1
    uint32_t     field_0x00fc;  // +0x00fc  R:0 W:1
    uint32_t     field_0x0100;  // +0x0100  R:1 W:0
    uint8_t     _pad0x0110[12];
    uint32_t     field_0x0110;  // +0x0110  R:0 W:1
    uint32_t     field_0x0114;  // +0x0114  R:2 W:1
    uint8_t      field_0x0118;  // +0x0118  R:0 W:1
    uint8_t      field_0x0119;  // +0x0119  R:0 W:1
    uint8_t      field_0x011a;  // +0x011a  R:0 W:1
    uint32_t     field_0x0120;  // +0x0120  R:0 W:1
    uint32_t     field_0x0124;  // +0x0124  R:0 W:1
    uint32_t     field_0x0128;  // +0x0128  R:0 W:1
    uint32_t     field_0x012c;  // +0x012c  R:0 W:1
    uint32_t     field_0x0130;  // +0x0130  R:0 W:1
    uint32_t     field_0x0134;  // +0x0134  R:0 W:1
    uint32_t     field_0x0138;  // +0x0138  R:0 W:1
    uint32_t     field_0x013c;  // +0x013c  R:0 W:1
    uint32_t     field_0x0140;  // +0x0140  R:1 W:1
    uint32_t     field_0x0144;  // +0x0144  R:1 W:1
    uint8_t     _pad0x01b4[108];
    uint32_t     field_0x01b4;  // +0x01b4  R:2 W:0
    uint32_t     field_0x01b8;  // +0x01b8  R:1 W:0
    uint8_t     _pad0x02d0[276];
    uint32_t     field_0x02d0;  // +0x02d0  R:1 W:0
    uint32_t     field_0x02d4;  // +0x02d4  R:1 W:0
    uint8_t     _pad0x0333[91];
    uint8_t      field_0x0333;  // +0x0333  R:1 W:0
    uint8_t     _pad0x03b0[121];
    uint8_t      field_0x03b0;  // +0x03b0  R:0 W:1
    uint8_t     _pad0x03d0[28];
    uint32_t     field_0x03d0;  // +0x03d0  R:4 W:1
    uint32_t     field_0x03d4;  // +0x03d4  R:2 W:1
    uint32_t     field_0x03d8;  // +0x03d8  R:0 W:1
    uint8_t     _pad0x03f0[20];
    uint32_t     field_0x03f0;  // +0x03f0  R:2 W:0
    uint32_t     field_0x03f4;  // +0x03f4  R:1 W:0
    uint32_t     field_0x03fc;  // +0x03fc  R:1 W:0
    uint32_t     field_0x0404;  // +0x0404  R:2 W:0
    uint32_t     field_0x0408;  // +0x0408  R:1 W:0
    uint32_t     field_0x040c;  // +0x040c  R:1 W:0
    uint32_t     field_0x0410;  // +0x0410  R:2 W:0
    uint32_t     field_0x0414;  // +0x0414  R:1 W:0
    uint32_t     field_0x041c;  // +0x041c  R:2 W:1
    uint32_t     field_0x0420;  // +0x0420  R:1 W:1
    uint32_t     field_0x0424;  // +0x0424  R:1 W:1
    uint32_t     field_0x042c;  // +0x042c  R:1 W:1
    uint32_t     field_0x0430;  // +0x0430  R:1 W:1
    uint32_t     field_0x0434;  // +0x0434  R:0 W:1
    uint32_t     field_0x0438;  // +0x0438  R:0 W:1
    uint8_t      field_0x043c;  // +0x043c  R:1 W:0
    uint32_t     field_0x0444;  // +0x0444  R:1 W:1
    uint32_t     field_0x0448;  // +0x0448  R:4 W:0
    uint8_t     _pad0x0460[20];
    uint32_t     field_0x0460;  // +0x0460  R:0 W:1

    // ── virtual methods ──
    virtual ~pongShadowMap();                  // [0] @ 0x82144660

    // ── non-virtual methods (from debug strings) ──
    void GenerateShadowMaps();
};

// ── pongSurface  [vtable @ 0x8204F70C] ──────────────────────────
struct pongSurface {
    void**      vtable;           // +0x00

    // ── virtual methods ──
    virtual ~pongSurface();                  // [0] @ 0x8222a960
    virtual void ScalarDtor(int flags); // [1] @ 0x82243ea8
    virtual void vfn_2();  // [2] @ 0x82243f78
};
