/**
 * pong_drill.hpp — Skeleton class declarations
 * Rockstar Presents Table Tennis (Xbox 360, 2006)
 *
 * 39 classes — auto-generated by gen_headers_v3.py
 * Sources: rtti_vtable_map | vtable_layout_map | offset_cluster_map
 *          | debug_string_field_map | rtti_class_hierarchy
 *
 * TODO: fill return types, params, inheritance.
 *       Cross-ref recomp/structured_pass5_final/ for each method.
 */
#pragma once
#include <stdint.h>

// ── backspinTipData  [2 vtables — template/MI] ──────────────────────────
struct backspinTipData {
    void**      vtable;           // +0x00

    // ── virtual methods ──
    virtual void PostLoadProperties();  // [20] @ 0x821f2910
    virtual void PostLoadChildren();  // [22] @ 0x821161c0
};

// ── badSoftShotTipData  [2 vtables — template/MI] ──────────────────────────
struct badSoftShotTipData {
    void**      vtable;           // +0x00

    // ── virtual methods ──
    virtual void CallInit();  // [2] @ 0x821f28c0
    virtual void PostLoadProperties();  // [20] @ 0x821f2858
    virtual void Validate();  // [21] @ 0x821f28a0
    virtual void PostLoadChildren();  // [22] @ 0x821160e8
};

// ── firstServeTipData  [2 vtables — template/MI] ──────────────────────────
struct firstServeTipData {
    void**      vtable;           // +0x00

    // ── virtual methods ──
    virtual void PostLoadProperties();  // [20] @ 0x821f2958
    virtual void PostLoadChildren();  // [22] @ 0x82116288
};

// ── focusMeterTipData  [2 vtables — template/MI] ──────────────────────────
struct focusMeterTipData {
    void**      vtable;           // +0x00

    // ── virtual methods ──
    virtual void CallInit();  // [2] @ 0x821f2550
    virtual void PostLoadProperties();  // [20] @ 0x821f2498
    virtual void Validate();  // [21] @ 0x821f24e0
    virtual void PostLoadChildren();  // [22] @ 0x82115d90
};

// ── forcedFromTableCenterTipData  [2 vtables — template/MI] ──────────────────────────
struct forcedFromTableCenterTipData {
    void**      vtable;           // +0x00

    // ── virtual methods ──
    virtual void CallInit();  // [2] @ 0x821f2628
    virtual void PostLoadProperties();  // [20] @ 0x821f25c0
    virtual void Validate();  // [21] @ 0x821f2608
    virtual void PostLoadChildren();  // [22] @ 0x82115e68
};

// ── gdDrillChargingData  [vtable @ 0x82041264] ──────────────────────────
// Confirmed methods: PostLoadProperties
struct gdDrillChargingData {
    void**      vtable;           // +0x00

    // ── virtual methods ──
    virtual void PostLoadProperties();  // [20] @ 0x821df330
    virtual void Validate();  // [21] @ 0x821df448
    virtual void PostLoadChildren();  // [22] @ 0x821df388

};

// ── gdDrillCounterSpinData  [vtable @ 0x8204139C] ──────────────────────────
// Confirmed methods: PostLoadProperties
struct gdDrillCounterSpinData {
    void**      vtable;           // +0x00

    // ── virtual methods ──
    virtual void PostLoadProperties();  // [20] @ 0x821df9b8
    virtual void Validate();  // [21] @ 0x821dfac8
    virtual void PostLoadChildren();  // [22] @ 0x821dfa10

};

// ── gdDrillFocusShotData  [vtable @ 0x82041334] ──────────────────────────
// Confirmed methods: PostLoadProperties
struct gdDrillFocusShotData {
    void**      vtable;           // +0x00

    // ── virtual methods ──
    virtual void PostLoadProperties();  // [20] @ 0x821df7a8
    virtual void PostLoadChildren();  // [22] @ 0x821df800

};

// ── gdDrillMovementData  [vtable @ 0x82040FF4] ──────────────────────────
// Confirmed methods: PostLoadProperties
struct gdDrillMovementData {
    void**      vtable;           // +0x00

    // ── virtual methods ──
    virtual void PostLoadProperties();  // [20] @ 0x821de898
    virtual void Validate();  // [21] @ 0x821de9c8
    virtual void PostLoadChildren();  // [22] @ 0x821de8f0

};

// ── gdDrillPlacementData  [vtable @ 0x82041194] ──────────────────────────
struct gdDrillPlacementData {
    void**      vtable;           // +0x00

    // ── virtual methods ──
    virtual void PostLoadProperties();  // [20] @ 0x821def48
    virtual void PostLoadChildren();  // [22] @ 0x821defa0
};

// ── gdDrillReturnData  [vtable @ 0x8204112C] ──────────────────────────
struct gdDrillReturnData {
    void**      vtable;           // +0x00

    // ── virtual methods ──
    virtual void PostLoadProperties();  // [20] @ 0x821dee70
    virtual void PostLoadChildren();  // [22] @ 0x821deec8
};

// ── gdDrillServeMeterData  [vtable @ 0x8204105C] ──────────────────────────
struct gdDrillServeMeterData {
    void**      vtable;           // +0x00

    // ── virtual methods ──
    virtual void PostLoadProperties();  // [20] @ 0x821dec00
    virtual void Validate();  // [21] @ 0x821dece8
    virtual void PostLoadChildren();  // [22] @ 0x821dec58
};

// ── gdDrillSmashData  [vtable @ 0x82041404] ──────────────────────────
struct gdDrillSmashData {
    void**      vtable;           // +0x00

    // ── virtual methods ──
    virtual void PostLoadProperties();  // [20] @ 0x821dfcb8
    virtual void PostLoadChildren();  // [22] @ 0x821dfd10
};

// ── gdDrillSoftShotData  [vtable @ 0x820411FC] ──────────────────────────
// Confirmed methods: PostLoadProperties
struct gdDrillSoftShotData {
    void**      vtable;           // +0x00

    // ── virtual methods ──
    virtual void PostLoadProperties();  // [20] @ 0x821df020
    virtual void Validate();  // [21] @ 0x821df130
    virtual void PostLoadChildren();  // [22] @ 0x821df078

};

// ── gdDrillSpinData  [vtable @ 0x820412CC] ──────────────────────────
// Confirmed methods: PostLoadProperties
struct gdDrillSpinData {
    void**      vtable;           // +0x00

    // ── virtual methods ──
    virtual void PostLoadProperties();  // [20] @ 0x821df610
    virtual void Validate();  // [21] @ 0x821df898
    virtual void PostLoadChildren();  // [22] @ 0x821df668

};

// ── gdTrainingDrillData  [vtable @ 0x82040F8C] ──────────────────────────
// Confirmed methods: Load, PostLoadProperties
struct gdTrainingDrillData {
    void**      vtable;           // +0x00

    // ── virtual methods ──
    virtual ~gdTrainingDrillData();                  // [0] @ 0x821dfd90
    virtual void PostLoadProperties();  // [20] @ 0x821de2d8
    virtual void Validate();  // [21] @ 0x821de3c0
    virtual void PostLoadChildren();  // [22] @ 0x821de320

    // ── non-virtual methods (from debug strings) ──
    void Load();
};

// ── gdTrainingDrills  [vtable @ 0x82040F24] ──────────────────────────
struct gdTrainingDrills {
    void**      vtable;           // +0x00

    // ── virtual methods ──
    virtual void PostLoadProperties();  // [20] @ 0x821de200
    virtual void PostLoadChildren();  // [22] @ 0x821de248
};

// ── gdTrainingSaveData  [2 vtables — template/MI] ──────────────────────────
struct gdTrainingSaveData {
    void**      vtable;           // +0x00

    // ── virtual methods ──
    virtual ~gdTrainingSaveData();                  // [0] @ 0x821cacd8
    virtual void Init();  // [3] @ 0x82212ff0
};

// ── gdTrainingSaveValues  [vtable @ 0x8204A870] ──────────────────────────
struct gdTrainingSaveValues {
    void**      vtable;           // +0x00
};

// ── hitTipData  [2 vtables — template/MI] ──────────────────────────
// XML data node for hit tip configuration during gameplay.
// Inherits from rage::xmlNodeStruct via multiple inheritance.
// Vtable 1 @ 0x82043300 (primary, 12 bytes)
// Vtable 2 @ 0x8204330C (secondary, 100 bytes)
struct hitTipData {
    void**      vtable;           // +0x00

    // ── padding for MI secondary vtable area ──
    uint32_t    m_reserved[3];    // +0x04..+0x0C (MI bookkeeping)

    // ── XML properties (registered by LoadProperties) ──
    int32_t     m_shotType;               // +0x10 (16) — Shot type enum [0..5], registered as "ShotType"
    int32_t     m_minScore;               // +0x14 (20) — Minimum score threshold, registered as "MinScore"
    int32_t     m_scoreThreshold;         // +0x18 (24) — Score threshold, registered as "Score"
    int32_t     m_consecutiveThreshold;   // +0x1C (28) — Consecutive shots required, registered as "InARow"
    int32_t     m_enabled;                // +0x20 (32) — Active flag, registered as "Active"

    // ── virtual methods ──
    virtual ~hitTipData();                          // [0] @ 0x821F2AB8
    virtual void PostLoadProperties();              // [2] @ 0x821F2298
    virtual bool IsApplicable(uint32_t typeHash);   // [20] @ 0x821F2188
    virtual void LoadProperties();                  // [21] @ 0x821F21D0
    virtual const char* GetNodeTypeName();          // [22] @ 0x82115BD8
};


namespace hitTipDataInner {

// ── hitTipData::xmlNodeStructGroupType  [vtable @ 0x82043370] ──────────────────────────
struct xmlNodeStructGroupType {
    void**      vtable;           // +0x00

    // ── virtual methods ──
    virtual void OnStart();  // [5] @ 0x821f2148
};

} // namespace hitTipDataInner

// ── noSoftShotsTipData  [2 vtables — template/MI] ──────────────────────────
struct noSoftShotsTipData {
    void**      vtable;           // +0x00

    // ── virtual methods ──
    virtual void CallInit();  // [2] @ 0x821f2730
    virtual void PostLoadProperties();  // [20] @ 0x821f2678
    virtual void Validate();  // [21] @ 0x821f26c0
    virtual void PostLoadChildren();  // [22] @ 0x82115f38
};

// ── reviewOnlyTipData  [2 vtables — template/MI] ──────────────────────────
struct reviewOnlyTipData {
    void**      vtable;           // +0x00

    // ── virtual methods ──
    virtual void CallInit();  // [2] @ 0x821f2a68
    virtual void PostLoadProperties();  // [20] @ 0x821f29a0
    virtual void Validate();  // [21] @ 0x821f2a48
    virtual void PostLoadChildren();  // [22] @ 0x82116358
};

// ── serveTipData  [2 vtables — template/MI] ──────────────────────────
struct serveTipData {
    void**      vtable;           // +0x00

    // ── virtual methods ──
    virtual void CallInit();  // [2] @ 0x821f2410
    virtual void PostLoadProperties();  // [20] @ 0x821f2320
    virtual void Validate();  // [21] @ 0x821f2368
    virtual void PostLoadChildren();  // [22] @ 0x82115cb8
};

namespace serveTipDataInner {

// ── serveTipData::xmlNodeStructGroupType  [vtable @ 0x82043408] ──────────────────────────

} // namespace serveTipDataInner

// ── statsThresholdData  [vtable @ 0x8204C5A4] ──────────────────────────
struct statsThresholdData {
    void**      vtable;           // +0x00

    // ── virtual methods ──
    virtual void CallInit();  // [2] @ 0x82218828
    virtual void PostLoadProperties();  // [20] @ 0x82218718
    virtual void Validate();  // [21] @ 0x82218760
    virtual void PostLoadChildren();  // [22] @ 0x821e1070
};

// ── tooFarFromTableTipData  [2 vtables — template/MI] ──────────────────────────
struct tooFarFromTableTipData {
    void**      vtable;           // +0x00

    // ── virtual methods ──
    virtual void CallInit();  // [2] @ 0x821f2808
    virtual void PostLoadProperties();  // [20] @ 0x821f27a0
    virtual void Validate();  // [21] @ 0x821f27e8
    virtual void PostLoadChildren();  // [22] @ 0x82116010
};


////////////////////////////////////////////////////////////////////////////////
// Training Drill Classes — merged from pong_training_drills.hpp
////////////////////////////////////////////////////////////////////////////////

/**
 * Training Drill Classes
 * Rockstar Presents Table Tennis (Xbox 360)
 * 
 * Training mode drill system with base class and 11 specialized drill types.
 * Each drill teaches a specific table tennis skill (movement, serving, spin, etc.)
 */



/**
 * pongTrainingDrill (Base Class)
 * @ RTTI: 0x82031C3C
 * 
 * Base class for all training drills. Manages success/failure tracking,
 * timing, and common drill state.
 */
class pongTrainingDrill {
public:
    // Virtual functions
    virtual ~pongTrainingDrill() {}                          // vfn_0
    virtual void ScalarDestructor() {}                       // vfn_1
    virtual void CallInit() {}                               // vfn_2 - thunk to vfn_3
    virtual void Init();                                     // vfn_3 @ 0x8210CDB8
    virtual void Update() {}                                 // vfn_4
    virtual void OnStart() {}                                // vfn_5
    virtual void OnEnd() {}                                  // vfn_6
    virtual void OnReset() {}                                // vfn_7
    virtual void Process() {}                                // vfn_9
    virtual void Render() {}                                 // vfn_10
    virtual void OnSuccess() {}                              // vfn_11
    virtual void OnFailure() {}                              // vfn_12
    virtual void GetName() {}                                // vfn_13
    virtual void GetDescription() {}                         // vfn_14
    virtual void IsComplete() {}                             // vfn_15
    virtual void GetProgress() {}                            // vfn_16
    virtual void CanAdvance() {}                             // vfn_23
    virtual void GetDifficulty() {}                          // vfn_24
    virtual void SetDifficulty() {}                          // vfn_25
    virtual void OnBallHit() {}                              // vfn_27
    virtual void OnBallMiss() {}                             // vfn_28
    virtual void OnRallyEnd() {}                             // vfn_29
    virtual void OnPointScored() {}                          // vfn_30

    // @ 0x8210D400 | size: 0x84
    void IncreaseNumSuccesses(int increment);

protected:
    // +0x00: vtable (implicit)
    uint32_t m_numAttempts;              // +0x04 - Total number of attempts
    uint32_t m_numSuccesses;             // +0x08 - Number of successful attempts
    uint32_t m_prevSuccesses;            // +0x0C - Previous success count (for change detection)
    uint32_t m_numFailures;              // +0x10 - Number of failed attempts
    float m_timeRemaining;               // +0x14 - Time remaining for drill
    uint8_t m_completionFlag;            // +0x18 - Completion event flag
    uint8_t m_padding19[3];              // +0x19 - Padding
    uint32_t m_targetIndex;              // +0x1C - Current target index (-1 = none)
    pongTrainingDrillConfig* m_pConfig;  // +0x20 - Pointer to drill configuration
};

/**
 * pongDrillMovement
 * @ RTTI: 0x82031CCC
 * 
 * Teaches player movement and positioning.
 */
class pongDrillMovement : public pongTrainingDrill {
public:
    virtual void Init() override;        // vfn_3 @ 0x8210DB48
    virtual void Update() override {}    // vfn_4
    virtual void OnStart() override {}   // vfn_5
    virtual void Process() override {}   // vfn_9

private:
    enum MovementState {
        MOVEMENT_STATE_0 = 0,
        MOVEMENT_STATE_1 = 1,
        MOVEMENT_STATE_2 = 2,
        MOVEMENT_STATE_3 = 3,
        MOVEMENT_STATE_4 = 4
    };

    uint8_t m_movementFlag;              // +0x24 - Movement state flag
    uint8_t m_padding25[3];              // +0x25 - Padding
    float m_targetDistance;              // +0x28 - Distance to target position
    float m_moveTimer;                   // +0x2C - Movement timer (counts down)
    MovementState m_movementState;       // +0x30 - Current movement state (0-4)
    uint8_t m_isComplete;                // +0x34 - Drill completion flag
    uint8_t m_padding35[3];              // +0x35 - Padding
};

/**
 * pongDrillServeMeter
 * @ RTTI: 0x82031D5C
 * 
 * Teaches serve power meter timing.
 */
class pongDrillServeMeter : public pongTrainingDrill {
public:
    virtual void Init() override {}
    virtual void Update() override {}
    virtual void Process() override {}
};

/**
 * pongDrillServing
 * @ RTTI: 0x82031DEC
 * 
 * Teaches serving technique and placement.
 */
class pongDrillServing : public pongTrainingDrill {
public:
    virtual void Init() override {}
    virtual void Update() override {}
    virtual void Process() override {}
};

/**
 * pongDrillReturn
 * @ RTTI: 0x82031E7C
 * 
 * Teaches returning serves.
 */
class pongDrillReturn : public pongTrainingDrill {
public:
    virtual void Init() override {}
    virtual void Update() override {}
    virtual void Process() override {}
};

/**
 * pongDrillPlacement
 * @ RTTI: 0x82031F0C
 * 
 * Teaches shot placement accuracy.
 */
class pongDrillPlacement : public pongTrainingDrill {
public:
    virtual void Init() override {}
    virtual void Update() override {}
    virtual void Process() override {}
};

/**
 * pongDrillSoftShot
 * @ RTTI: 0x82031F9C
 * 
 * Teaches soft shot technique (drop shots, touch shots).
 */
class pongDrillSoftShot : public pongTrainingDrill {
public:
    virtual void Init() override {}
    virtual void Update() override {}
    virtual void Process() override {}
};

/**
 * pongDrillCharging
 * @ RTTI: 0x8203202C
 * 
 * Teaches charging shots for power.
 */
class pongDrillCharging : public pongTrainingDrill {
public:
    virtual void Init() override {}
    virtual void Update() override {}
    virtual void Process() override {}
};

/**
 * pongDrillSpin
 * @ RTTI: 0x820320BC
 * 
 * Teaches applying spin to shots (topspin, backspin, sidespin).
 */
class pongDrillSpin : public pongTrainingDrill {
public:
    virtual void Init() override {}      // vfn_3 @ 0x821101E0
    virtual void Process() override {}   // vfn_8 @ 0x82110218
};

/**
 * pongDrillFocusShot
 * @ RTTI: 0x8203214C
 * 
 * Teaches focus shot mechanic (special powered shot).
 */
class pongDrillFocusShot : public pongTrainingDrill {
public:
    virtual void Init() override {}
    virtual void Update() override {}
    virtual void Process() override {}
};

/**
 * pongDrillCounterSpin
 * @ RTTI: 0x820321DC
 * 
 * Teaches countering opponent's spin.
 */
class pongDrillCounterSpin : public pongTrainingDrill {
public:
    virtual void Init() override {}
    virtual void Update() override {}
    virtual void Process() override {}
};

/**
 * pongDrillSmash
 * @ RTTI: 0x8203226C
 * 
 * Teaches smash technique (overhead power shot).
 */
class pongDrillSmash : public pongTrainingDrill {
public:
    virtual void Init() override {}
    virtual void Update() override {}
    virtual void Process() override {}
};

// Compile-time size verification
static_assert(sizeof(pongTrainingDrill) >= 36, "pongTrainingDrill minimum size check");
